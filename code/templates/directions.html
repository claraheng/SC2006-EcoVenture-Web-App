<html>
<head>
	<title>Directions Request from Current Location</title>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBiGsmX06pkCBB0-AGc0f76kXr0SuoraKQ"></script>
	<script>
		function initMap() {
			var directionsService = new google.maps.DirectionsService();
			var directionsDisplay = new google.maps.DirectionsRenderer();
			var map = new google.maps.Map(document.getElementById('map'), {
				zoom: 14,
				center: {lat: 1.3521, lng: 103.8198} // Singapore coordinates
			});
			directionsDisplay.setMap(map);

			// Get user's current location
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(function(position) {
					var userLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
					var destination = '{{ travel.destination }}';

					// Create request object
					var request = {
						origin: userLocation, // User location
						destination: destination, // Your Destination location
						travelMode: '{{ travel.mode }}' //DRIVING, BICYCLING, TRANSIT, WALKING
					};

					// Send request to Google Maps API
					directionsService.route(request, function(result, status) {
						if (status == 'OK') {
							directionsDisplay.setDirections(result);
						}
					});
				}, function() {
					alert('Unable to determine your location.');
				});
			} else {
				alert('Your browser does not support geolocation.');
			}
		}
	</script>
</head>
<body onload="initMap()">
	<div id="map" style="height: 500px; width: 100%;"></div>
</body>
</html>